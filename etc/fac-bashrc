# Paths
# =====
if [ -z $FACROOT ] ; then
    if [ -d /home ] ; then
        export FACROOT=/home/fac_files
    elif [ -d /Users ] ; then
        export FACROOT=/Users/fac_files
    else
        echo "FACROOT not defined!"
    fi
fi

export FACCODE=$FACROOT/code
export FACDATA=$FACROOT/data

# Python
# ======
export PYTHONPATH=$PYTHONPATH:$FACCODE/job_manager/src
export PYTHONPATH=$PYTHONPATH:$FACROOT/hla/plot/src

# FAC scripts
# ===========
export PATH=$PATH:$FACCODE/job_manager/apps
export PATH=$PATH:$FACCODE/scripts/fieldmap_analysis

# EPICS
# =====
EPICS_DIR=/usr/local/epics

if [ -z $EPICS_BASE ] ; then
    export EPICS_BASE=$EPICS_DIR/R3.14/base
fi

if [ -z $EPICS_HOST_ARCH ] ; then
    export EPICS_HOST_ARCH=linux-x86_64
fi

if [ -z $EV4_BASE ] ; then
    export EV4_BASE=$EPICS_DIR/v4
fi

if [ -z $EPICS_EXTENSIONS ] ; then
    export EPICS_EXTENSIONS=$EPICS_DIR/R3.14/extensions
fi

export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$EPICS_BASE/lib/$EPICS_HOST_ARCH
export PVDATABASE=$EV4_BASE/pvDatabaseCPP
export PVASRV=$EV4_BASE/pvaSrv
export PVACCESS=$EV4_BASE/pvAccessCPP
export NORMATIVETYPES=$EV4_BASE/normativeTypesCPP
export PVDATA=$EV4_BASE/pvDataCPP
export PVCOMMON=$EV4_BASE/pvCommonCPP
export PATH=$PATH:$EPICS_BASE/bin/$EPICS_HOST_ARCH
export PATH=$PATH:$PVACCESS/bin/$EPICS_HOST_ARCH
export PATH=$PATH:$EPICS_EXTENSIONS/bin/$EPICS_HOST_ARCH

# Definitions for elegant rpn
# ===========================
export RPN_DEFNS=/usr/local/epics_oag/defns.rpn

# Elegant and related software (including geneticOptimizer)
# =========================================================
export HOST_ARCH=linux-x86_64
export OAG_TOP_DIR=/usr/local/epics_oag

# Elegant and OAG configs
# =======================
export PATH=$PATH:/usr/local/epics_oag/epics/base/bin/linux-x86_64:/usr/local/epics_oag/epics/extensions/bin/linux-x86_64:/usr/local/epics_oag/oag/apps/bin/linux-x86_64
export TCLLIBPATH="/usr/local/epics_oag/oag/apps/lib/linux-x86_64 /usr/local/epics_oag/epics/extensions/lib/linux-x86_64 /usr/local/epics_oag/oag/apps/lib/linux-x86_64/sdds /usr/local/epics_oag/oag/apps/lib/linux-x86_64/os /usr/local/epics_oag/oag/apps/lib/linux-x86_64/ca /usr/local/epics_oag/oag/apps/lib/linux-x86_64/rpn"
export PYTHONPATH=$PYTHONPATH:/usr/local/epics_oag/oag/apps/lib/linux-x86_64:/usr/local/epics_oag/epics/extensions/lib/linux-x86_64

# Completion for JobManager functions
# ===================================
complete -W "--description --exec --inputFiles --workingDirectory --priority --possibleHosts --help"                                    pyjob_qsub.py
complete -W "--clients --showCalendar --help"                                                                                           pyjob_configs_get.py
complete -W "--clients --niceness --shutdown --remove --MoreJobs --defnumproc --calendar --weekday --initial --final --num_proc --help" pyjob_configs_set.py
complete -W "--sure --help"                                                                                                             pyjob_shutdown.py
complete -W "--jobs --status --user --description --explicate --choose --summary --help"                                                pyjob_qstat.py
complete -W "--jobs --status --user --description --signal --priority --possibleHosts --help"                                           pyjob_qsig.py
complete -W "--check --wake --startVBox --stopVBox --statusVBox --help"                                                                 manage_hosts_subnet.py

# Completion for FieldMap analysis functions
# ==========================================
complete -W "help clean edit run summary rawfield trajectory multipoles model summary"                                                  fma-analysis.py
complete -W "--input-file"                                                                                                              fma-rawfield.py

# Completion for VA
# =================
complete -W "stop start list vaca si_current si_lifetime si_bpms si_ps si_tune topup"  sirius-va

# Completion for binary trackcpp
# ==============================
complete -W "help dynap_xy dynap_ex dynap_ma dynap_pxa dynap_pya dynap_xyfmap dynap_exfmap track_linepass tests" trackcpp
complete -W "--path --save --help"  trackcpp_da_ma_results.py

# Aliases
# =======

alias gofacroot='cd $FACROOR'

alias gohla='cd $FACROOT/hla'
alias gosiriusdb='cd $FACROOT/siriusdb'
alias gocode='cd $FACCODE'
alias godata='cd $FACDATA'

alias golnls='cd $FACCODE/lnls'
alias gosirius='cd $FACCODE/sirius'
alias gotrackcpp='cd $FACCODE/trackcpp'
alias gomathphys='cd $FACCODE/mathphys'
alias gova='cd $FACCODE/va'
alias goscripts='cd $FACCODE/scripts'
alias gopyaccel='cd $FACCODE/pyaccel'
alias gomml='cd $FACCODE/MatlabMiddleLayer/Release'
alias goapsuite='cd $FACCODE/apsuite'

alias gofieldmap='cd $FACDATA/sirius/si/magnet_modelling'

alias goepics='cd $EPICS_DIR'
